2025-01-26 13:29:03,689 - root - INFO - logging_config.py:56 - Logging system initialized
2025-01-26 13:29:04,871 - root - INFO - app.py:17 - Fetching available Ollama models
2025-01-26 13:29:04,872 - httpcore.connection - DEBUG - _trace.py:47 - connect_tcp.started host='127.0.0.1' port=11434 local_address=None timeout=None socket_options=None
2025-01-26 13:29:04,873 - httpcore.connection - DEBUG - _trace.py:47 - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001859174FA70>
2025-01-26 13:29:04,874 - httpcore.http11 - DEBUG - _trace.py:47 - send_request_headers.started request=<Request [b'GET']>
2025-01-26 13:29:04,874 - httpcore.http11 - DEBUG - _trace.py:47 - send_request_headers.complete
2025-01-26 13:29:04,874 - httpcore.http11 - DEBUG - _trace.py:47 - send_request_body.started request=<Request [b'GET']>
2025-01-26 13:29:04,874 - httpcore.http11 - DEBUG - _trace.py:47 - send_request_body.complete
2025-01-26 13:29:04,874 - httpcore.http11 - DEBUG - _trace.py:47 - receive_response_headers.started request=<Request [b'GET']>
2025-01-26 13:29:04,881 - httpcore.http11 - DEBUG - _trace.py:47 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Sun, 26 Jan 2025 09:29:04 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-01-26 13:29:04,884 - httpx - INFO - _client.py:1038 - HTTP Request: GET http://127.0.0.1:11434/api/tags "HTTP/1.1 200 OK"
2025-01-26 13:29:04,884 - httpcore.http11 - DEBUG - _trace.py:47 - receive_response_body.started request=<Request [b'GET']>
2025-01-26 13:29:04,885 - httpcore.http11 - DEBUG - _trace.py:47 - receive_response_body.complete
2025-01-26 13:29:04,885 - httpcore.http11 - DEBUG - _trace.py:47 - response_closed.started
2025-01-26 13:29:04,885 - httpcore.http11 - DEBUG - _trace.py:47 - response_closed.complete
2025-01-26 13:29:04,886 - root - INFO - app.py:25 - Found 16 available models: ['deepseek-r1:latest', 'llama3.2:latest', 'llama3.3:70b-instruct-q4_K_S', 'llama3.2-vision:latest', 'marco-o1:latest', 'phi3:latest', 'research-phi3:latest', 'phi3:14b-instruct', 'qwen2.5:latest', 'NAME:latest', 'llava:13b', 'mxbai-embed-large:latest', 'nomic-embed-text:latest', 'x/llama3.2-vision:latest', 'mistral:latest', 'granite3-dense:latest']
2025-01-26 13:29:04,964 - root - INFO - conftest.py:39 - Test logging initialized
2025-01-26 13:29:04,976 - tests.test_app - INFO - test_app.py:53 - Testing page initialization
2025-01-26 13:29:04,978 - tests.test_app - ERROR - test_app.py:65 - Error in page initialization test: assert False
 +  where False = <MagicMock name='set_page_config' id='1673202309152'>.called
2025-01-26 13:29:04,997 - tests.test_app - INFO - test_app.py:70 - Testing model selection
2025-01-26 13:29:04,998 - tests.test_app - ERROR - test_app.py:78 - Error in model selection test: assert False
 +  where False = <MagicMock name='selectbox' id='1673201750992'>.called
2025-01-26 13:29:05,017 - tests.test_app - INFO - test_app.py:83 - Testing sample tasks
2025-01-26 13:29:05,019 - tests.test_app - ERROR - test_app.py:92 - Error in sample tasks test: st.session_state has no attribute "user_input". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization
2025-01-26 13:29:05,097 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,099 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,102 - tests.test_app - INFO - test_app.py:98 - Testing process request
2025-01-26 13:29:05,104 - tests.test_app - ERROR - test_app.py:119 - Error in process request test: name 'process_request' is not defined
2025-01-26 13:29:05,116 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,126 - tests.test_app - INFO - test_app.py:124 - Testing error handling
2025-01-26 13:29:05,127 - tests.test_app - ERROR - test_app.py:138 - Error in error handling test: assert False
 +  where False = <MagicMock name='error' id='1673201287440'>.called
2025-01-26 13:29:05,140 - tests.test_app - INFO - test_app.py:143 - Testing session state management
2025-01-26 13:29:05,142 - tests.test_app - DEBUG - test_app.py:155 - Session state management verified
2025-01-26 13:29:05,154 - tests.test_app - INFO - test_app.py:162 - Testing UI components visibility
2025-01-26 13:29:05,156 - tests.test_app - ERROR - test_app.py:172 - Error in UI components visibility test: assert False
 +  where False = <MagicMock name='title' id='1673201127680'>.called
2025-01-26 13:29:05,185 - tests.test_app - INFO - test_app.py:177 - Testing progress tracking
2025-01-26 13:29:05,188 - tests.test_app - DEBUG - test_app.py:190 - Progress tracking verified
2025-01-26 13:29:05,213 - tests.test_llm - INFO - test_llm.py:19 - Testing create_llm with successful response
2025-01-26 13:29:05,214 - tests.test_llm - DEBUG - test_llm.py:29 - LLM response: {'content': 'This is a test response', 'role': 'assistant'}
2025-01-26 13:29:05,218 - tests.test_llm - INFO - test_llm.py:36 - Testing create_llm error handling
2025-01-26 13:29:05,221 - tests.test_llm - DEBUG - test_llm.py:45 - Expected error raised: Error communicating with Ollama: Test error
2025-01-26 13:29:05,227 - tests.test_llm - INFO - test_llm.py:50 - Testing list_available_models with successful response
2025-01-26 13:29:05,228 - tests.test_llm - DEBUG - test_llm.py:59 - Retrieved models: ['model1', 'model2', 'model3']
2025-01-26 13:29:05,233 - tests.test_llm - INFO - test_llm.py:66 - Testing list_available_models error handling
2025-01-26 13:29:05,234 - llm - ERROR - llm.py:54 - Failed to list Ollama models: Test error
Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 51, in list_available_models
    models = ollama.list()
             ^^^^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1139, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1143, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\unittest\mock.py", line 1198, in _execute_mock_call
    raise effect
Exception: Test error
2025-01-26 13:29:05,256 - tests.test_llm - DEBUG - test_llm.py:72 - Expected error raised: Error listing Ollama models: Test error
2025-01-26 13:29:05,268 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,276 - tests.test_llm - INFO - test_llm.py:78 - Testing LLM async compatibility
2025-01-26 13:29:05,286 - tests.test_llm - DEBUG - test_llm.py:89 - Async LLM response: {'content': 'async test', 'role': 'assistant'}
2025-01-26 13:29:05,289 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,293 - tests.test_llm - INFO - test_llm.py:96 - Testing LLM with streaming option
2025-01-26 13:29:05,296 - tests.test_llm - DEBUG - test_llm.py:111 - Streaming LLM response: {'content': 'part1part2', 'role': 'assistant'}
2025-01-26 13:29:05,303 - tests.test_task_manager - INFO - test_task_manager.py:56 - Testing create_agent
2025-01-26 13:29:05,306 - tests.test_task_manager - DEBUG - test_task_manager.py:64 - Agent created successfully
2025-01-26 13:29:05,315 - tests.test_task_manager - INFO - test_task_manager.py:71 - Testing extract_core_tasks
2025-01-26 13:29:05,316 - task_manager - DEBUG - task_manager.py:35 - Extracting core tasks from plan: ['Step 1', 'Step 2', 'Step 3']
2025-01-26 13:29:05,317 - task_manager - DEBUG - task_manager.py:37 - Extracted core tasks: ['ep 1', 'ep 2', 'ep 3']
2025-01-26 13:29:05,317 - tests.test_task_manager - DEBUG - test_task_manager.py:77 - Extracted tasks: ['ep 1', 'ep 2', 'ep 3']
2025-01-26 13:29:05,321 - tests.test_task_manager - INFO - test_task_manager.py:84 - Testing get_last_human_message
2025-01-26 13:29:05,323 - tests.test_task_manager - DEBUG - test_task_manager.py:89 - Retrieved message: Test task
2025-01-26 13:29:05,329 - tests.test_task_manager - INFO - test_task_manager.py:96 - Testing parse_llm_result
2025-01-26 13:29:05,331 - tests.test_task_manager - DEBUG - test_task_manager.py:102 - Parsed result: {'goals': 'Complete test task', 'plan': ['Step 1: First action', 'Step 2: Second action', 'Step 3: Final action']}
2025-01-26 13:29:05,337 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,339 - tests.test_task_manager - INFO - test_task_manager.py:110 - Testing planner
2025-01-26 13:29:05,342 - task_manager - INFO - task_manager.py:76 - Executing Planner
2025-01-26 13:29:05,345 - task_manager - ERROR - task_manager.py:125 - Error in planner: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 29, in chat_with_ollama
    response = ollama.chat(
               ^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 338, in chat
    messages=[message for message in _copy_messages(messages)],
                                     ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 1131, in _copy_messages
    yield Message.model_validate(
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\task_manager.py", line 111, in planner
    result = llm(prompt.format_messages())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 39, in chat_with_ollama
    raise RuntimeError(f"Error communicating with Ollama: {str(e)}")
RuntimeError: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-01-26 13:29:05,351 - tests.test_task_manager - ERROR - test_task_manager.py:120 - Error in planner test: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-01-26 13:29:05,501 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,504 - tests.test_task_manager - INFO - test_task_manager.py:125 - Testing task_executor
2025-01-26 13:29:05,505 - task_manager - INFO - task_manager.py:129 - Executing Task Executor
2025-01-26 13:29:05,507 - task_manager - ERROR - task_manager.py:199 - Error in task_executor: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 29, in chat_with_ollama
    response = ollama.chat(
               ^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 338, in chat
    messages=[message for message in _copy_messages(messages)],
                                     ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 1131, in _copy_messages
    yield Message.model_validate(
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\task_manager.py", line 158, in task_executor
    result = llm(messages)
             ^^^^^^^^^^^^^
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 39, in chat_with_ollama
    raise RuntimeError(f"Error communicating with Ollama: {str(e)}")
RuntimeError: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-01-26 13:29:05,509 - tests.test_task_manager - DEBUG - test_task_manager.py:134 - Task executor result: {'past_actions': [('Step 1', "Error occurred: Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing")], 'current_node': 'task_executor', 'response': "Error occurred while executing the task: Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing", 'error': "Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing", 'next_task': None, 'plan': ['Step 1', 'Step 2', 'Step 3'], 'goals': 'Test goal', 'context': {'model_id': 'test-model'}, 'current_task': 'Step 1'}
2025-01-26 13:29:05,512 - tests.test_task_manager - INFO - test_task_manager.py:141 - Testing project_updater
2025-01-26 13:29:05,513 - task_manager - INFO - task_manager.py:219 - Executing Project Updater
2025-01-26 13:29:05,514 - tests.test_task_manager - DEBUG - test_task_manager.py:146 - Project updater result: {'messages': [SystemMessage(content='You are a helpful AI assistant.'), HumanMessage(content='Test task')], 'plan': ['Step 1', 'Step 2', 'Step 3'], 'goals': 'Test goal', 'past_actions': [], 'current_task': 'Step 1', 'response': 'Completed task: No action. Action taken: No details\n\nChecklist:\n- Step 1\n- Step 2\n- Step 3', 'context': {'model_id': 'test-model'}, 'current_node': 'project_updater'}
2025-01-26 13:29:05,518 - tests.test_task_manager - INFO - test_task_manager.py:153 - Testing replanner
2025-01-26 13:29:05,519 - task_manager - INFO - task_manager.py:245 - Executing Replanner
2025-01-26 13:29:05,522 - task_manager - ERROR - task_manager.py:296 - Error in replanner: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a re...ete.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 29, in chat_with_ollama
    response = ollama.chat(
               ^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 338, in chat
    messages=[message for message in _copy_messages(messages)],
                                     ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 1131, in _copy_messages
    yield Message.model_validate(
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a re...ete.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\task_manager.py", line 274, in replanner
    result = llm(messages)
             ^^^^^^^^^^^^^
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 39, in chat_with_ollama
    raise RuntimeError(f"Error communicating with Ollama: {str(e)}")
RuntimeError: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a re...ete.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-01-26 13:29:05,525 - tests.test_task_manager - ERROR - test_task_manager.py:163 - Error in replanner test: assert False
 +  where False = isinstance({'context': {'model_id': 'test-model'}, 'current_node': 'task_executor', 'current_task': 'Step 1', 'error': "Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a re...ete.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing", ...}, AgentFinish)
2025-01-26 13:29:05,541 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,543 - tests.test_task_manager - INFO - test_task_manager.py:169 - Testing run_paa
2025-01-26 13:29:05,545 - task_manager - INFO - task_manager.py:300 - Running Personal AI Assistant with question: Test task
2025-01-26 13:29:05,546 - task_manager - INFO - task_manager.py:319 - Current node: planner
2025-01-26 13:29:05,546 - task_manager - INFO - task_manager.py:76 - Executing Planner
2025-01-26 13:29:05,547 - task_manager - ERROR - task_manager.py:125 - Error in planner: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 29, in chat_with_ollama
    response = ollama.chat(
               ^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 338, in chat
    messages=[message for message in _copy_messages(messages)],
                                     ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 1131, in _copy_messages
    yield Message.model_validate(
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\task_manager.py", line 111, in planner
    result = llm(prompt.format_messages())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 39, in chat_with_ollama
    raise RuntimeError(f"Error communicating with Ollama: {str(e)}")
RuntimeError: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-01-26 13:29:05,551 - task_manager - ERROR - task_manager.py:367 - Error occurred in run_paa: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 29, in chat_with_ollama
    response = ollama.chat(
               ^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 338, in chat
    messages=[message for message in _copy_messages(messages)],
                                     ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 1131, in _copy_messages
    yield Message.model_validate(
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\task_manager.py", line 322, in run_paa
    current_state = planner(current_state)
                    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\task_manager.py", line 111, in planner
    result = llm(prompt.format_messages())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 39, in chat_with_ollama
    raise RuntimeError(f"Error communicating with Ollama: {str(e)}")
RuntimeError: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-01-26 13:29:05,558 - tests.test_task_manager - ERROR - test_task_manager.py:179 - Error in run_paa test: assert 'current_node' in {'error': "Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a pl...eps.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing"}
2025-01-26 13:29:05,583 - asyncio - DEBUG - proactor_events.py:634 - Using proactor: IocpProactor
2025-01-26 13:29:05,587 - tests.test_task_manager - INFO - test_task_manager.py:184 - Testing error handling
2025-01-26 13:29:05,589 - task_manager - INFO - task_manager.py:76 - Executing Planner
2025-01-26 13:29:05,590 - tests.test_task_manager - DEBUG - test_task_manager.py:190 - Planner error caught: No human message found in the conversation history
2025-01-26 13:29:05,590 - task_manager - INFO - task_manager.py:129 - Executing Task Executor
2025-01-26 13:29:05,592 - task_manager - ERROR - task_manager.py:199 - Error in task_executor: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 29, in chat_with_ollama
    response = ollama.chat(
               ^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 338, in chat
    messages=[message for message in _copy_messages(messages)],
                                     ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\ollama\_client.py", line 1131, in _copy_messages
    yield Message.model_validate(
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\denni\AppData\Roaming\Python\Python312\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\task_manager.py", line 158, in task_executor
    result = llm(messages)
             ^^^^^^^^^^^^^
  File "C:\Users\denni\Documents\personal-ai-task-assistant\src\llm.py", line 39, in chat_with_ollama
    raise RuntimeError(f"Error communicating with Ollama: {str(e)}")
RuntimeError: Error communicating with Ollama: 1 validation error for Message
role
  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-01-26 13:29:05,594 - tests.test_task_manager - DEBUG - test_task_manager.py:196 - Task executor error handled: {'past_actions': [('test', "Error occurred: Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing")], 'current_node': 'task_executor', 'response': "Error occurred while executing the task: Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing", 'error': "Error communicating with Ollama: 1 validation error for Message\nrole\n  Field required [type=missing, input_value={'content': 'You are a he...sks.', 'type': 'system'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing", 'next_task': None, 'plan': [], 'goals': '', 'context': {'model_id': 'test'}, 'current_task': 'test'}
